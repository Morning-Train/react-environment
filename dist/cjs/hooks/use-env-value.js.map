{"version":3,"file":"use-env-value.js","sources":["../../../src/hooks/use-env-value.js"],"sourcesContent":["import React from 'react'\nimport useEnv from './use-env'\nimport clone from 'lodash/clone'\n\nexport default function useEnvValue (path, defaultValue = null) {\n\n  const env = useEnv()\n\n  const defaultValueRef = React.useRef(defaultValue)\n  defaultValue = defaultValueRef.current\n\n  const [value, setValue] = React.useState(env.get(path, defaultValue))\n\n  React.useEffect(() => {\n    const disposer = env.observe(path, () => {\n      setValue(clone(env.get(path, defaultValue)))\n    })\n    setValue(clone(env.get(path, defaultValue)))\n    return disposer\n  }, [env, path, defaultValue])\n\n  React.useEffect(() => {\n    setValue(clone(env.get(path, defaultValue)))\n  }, [])\n\n  function setValueOverride (newValue) {\n    const valueInEnv = env.get(path)\n\n    if (valueInEnv !== newValue) {\n      env.set(path, newValue)\n    }\n  }\n\n  return [value, setValueOverride]\n}\n"],"names":["useEnvValue","path","defaultValue","env","useEnv","defaultValueRef","React","useRef","current","useState","get","_slicedToArray","value","setValue","useEffect","disposer","observe","clone","setValueOverride","newValue","valueInEnv","set"],"mappings":";;;;;;;;;;;;;AAIe,SAASA,WAAT,CAAsBC,IAAtB,EAAiD;AAAA,EAArBC,IAAAA,YAAqB,uEAAN,IAAM,CAAA;AAE9D,EAAMC,IAAAA,GAAG,GAAGC,MAAM,EAAlB,CAAA;AAEA,EAAA,IAAMC,eAAe,GAAGC,yBAAK,CAACC,MAAN,CAAaL,YAAb,CAAxB,CAAA;AACAA,EAAAA,YAAY,GAAGG,eAAe,CAACG,OAA/B,CAAA;;AAEA,EAAA,IAAA,eAAA,GAA0BF,yBAAK,CAACG,QAAN,CAAeN,GAAG,CAACO,GAAJ,CAAQT,IAAR,EAAcC,YAAd,CAAf,CAA1B;AAAA,MAAA,gBAAA,GAAAS,kCAAA,CAAA,eAAA,EAAA,CAAA,CAAA;AAAA,MAAOC,KAAP,GAAA,gBAAA,CAAA,CAAA,CAAA;AAAA,MAAcC,QAAd,GAAA,gBAAA,CAAA,CAAA,CAAA,CAAA;;AAEAP,EAAAA,yBAAK,CAACQ,SAAN,CAAgB,YAAM;AACpB,IAAMC,IAAAA,QAAQ,GAAGZ,GAAG,CAACa,OAAJ,CAAYf,IAAZ,EAAkB,YAAM;AACvCY,MAAAA,QAAQ,CAACI,yBAAK,CAACd,GAAG,CAACO,GAAJ,CAAQT,IAAR,EAAcC,YAAd,CAAD,CAAN,CAAR,CAAA;AACD,KAFgB,CAAjB,CAAA;AAGAW,IAAAA,QAAQ,CAACI,yBAAK,CAACd,GAAG,CAACO,GAAJ,CAAQT,IAAR,EAAcC,YAAd,CAAD,CAAN,CAAR,CAAA;AACA,IAAA,OAAOa,QAAP,CAAA;AACD,GAND,EAMG,CAACZ,GAAD,EAAMF,IAAN,EAAYC,YAAZ,CANH,CAAA,CAAA;AAQAI,EAAAA,yBAAK,CAACQ,SAAN,CAAgB,YAAM;AACpBD,IAAAA,QAAQ,CAACI,yBAAK,CAACd,GAAG,CAACO,GAAJ,CAAQT,IAAR,EAAcC,YAAd,CAAD,CAAN,CAAR,CAAA;AACD,GAFD,EAEG,EAFH,CAAA,CAAA;;AAIA,EAASgB,SAAAA,gBAAT,CAA2BC,QAA3B,EAAqC;AACnC,IAAA,IAAMC,UAAU,GAAGjB,GAAG,CAACO,GAAJ,CAAQT,IAAR,CAAnB,CAAA;;AAEA,IAAImB,IAAAA,UAAU,KAAKD,QAAnB,EAA6B;AAC3BhB,MAAAA,GAAG,CAACkB,GAAJ,CAAQpB,IAAR,EAAckB,QAAd,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AAED,EAAA,OAAO,CAACP,KAAD,EAAQM,gBAAR,CAAP,CAAA;AACD;;;;"}