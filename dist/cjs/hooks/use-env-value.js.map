{"version":3,"file":"use-env-value.js","sources":["../../../src/hooks/use-env-value.js"],"sourcesContent":["import React from 'react'\nimport useEnv from './use-env'\nimport clone from 'lodash/clone'\n\nexport default function useEnvValue (path, defaultValue = null) {\n\n  const env = useEnv()\n\n  const defaultValueRef = React.useRef(defaultValue)\n  defaultValue = defaultValueRef.current\n\n  const [value, setValue] = React.useState(env.get(path, defaultValue))\n\n  React.useEffect(() => {\n    const disposer = env.observe(path, () => {\n      setValue(clone(env.get(path, defaultValue)))\n    })\n    setValue(clone(env.get(path, defaultValue)))\n    return disposer\n  }, [env, path, defaultValue])\n\n  React.useEffect(() => {\n    setValue(clone(env.get(path, defaultValue)))\n  }, [])\n\n  function setValueOverride (newValue) {\n    const valueInEnv = env.get(path)\n\n    if (valueInEnv !== newValue) {\n      env.set(path, newValue)\n    }\n  }\n\n  return [value, setValueOverride]\n}\n"],"names":["useEnvValue","path","defaultValue","env","useEnv","defaultValueRef","React","useRef","current","useState","get","value","setValue","useEffect","disposer","observe","clone","setValueOverride","newValue","valueInEnv","set"],"mappings":";;;;;;;;;;;;AAIe,SAASA,WAAT,CAAsBC,IAAtB,EAAiD;AAAA,MAArBC,YAAqB,uEAAN,IAAM;AAE9D,MAAMC,GAAG,GAAGC,MAAM,EAAlB;AAEA,MAAMC,eAAe,GAAGC,yBAAK,CAACC,MAAN,CAAaL,YAAb,CAAxB;AACAA,EAAAA,YAAY,GAAGG,eAAe,CAACG,OAA/B;;AAEA,wBAA0BF,yBAAK,CAACG,QAAN,CAAeN,GAAG,CAACO,GAAJ,CAAQT,IAAR,EAAcC,YAAd,CAAf,CAA1B;AAAA;AAAA,MAAOS,KAAP;AAAA,MAAcC,QAAd;;AAEAN,EAAAA,yBAAK,CAACO,SAAN,CAAgB,YAAM;AACpB,QAAMC,QAAQ,GAAGX,GAAG,CAACY,OAAJ,CAAYd,IAAZ,EAAkB,YAAM;AACvCW,MAAAA,QAAQ,CAACI,yBAAK,CAACb,GAAG,CAACO,GAAJ,CAAQT,IAAR,EAAcC,YAAd,CAAD,CAAN,CAAR;AACD,KAFgB,CAAjB;AAGAU,IAAAA,QAAQ,CAACI,yBAAK,CAACb,GAAG,CAACO,GAAJ,CAAQT,IAAR,EAAcC,YAAd,CAAD,CAAN,CAAR;AACA,WAAOY,QAAP;AACD,GAND,EAMG,CAACX,GAAD,EAAMF,IAAN,EAAYC,YAAZ,CANH;AAQAI,EAAAA,yBAAK,CAACO,SAAN,CAAgB,YAAM;AACpBD,IAAAA,QAAQ,CAACI,yBAAK,CAACb,GAAG,CAACO,GAAJ,CAAQT,IAAR,EAAcC,YAAd,CAAD,CAAN,CAAR;AACD,GAFD,EAEG,EAFH;;AAIA,WAASe,gBAAT,CAA2BC,QAA3B,EAAqC;AACnC,QAAMC,UAAU,GAAGhB,GAAG,CAACO,GAAJ,CAAQT,IAAR,CAAnB;;AAEA,QAAIkB,UAAU,KAAKD,QAAnB,EAA6B;AAC3Bf,MAAAA,GAAG,CAACiB,GAAJ,CAAQnB,IAAR,EAAciB,QAAd;AACD;AACF;;AAED,SAAO,CAACP,KAAD,EAAQM,gBAAR,CAAP;AACD;;;;"}